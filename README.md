# è¿œç¨‹å‡çº§ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Node.js + Socket.IO çš„è®¾å¤‡è¿œç¨‹å‡çº§è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»éƒ¨ç½²å’Œå®æ—¶å‡çº§ç®¡ç†ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¯¥ç³»ç»ŸåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

- **æœåŠ¡ç«¯ (server-koa)**: åŸºäº Koa.js çš„å‡çº§æœåŠ¡å™¨ï¼Œæä¾› REST API å’Œ Socket.IO è¿æ¥ç®¡ç†
- **è®¾å¤‡ä»£ç† (agent-device)**: è¿è¡Œåœ¨ç›®æ ‡è®¾å¤‡ä¸Šçš„å‡çº§ä»£ç†ï¼Œè´Ÿè´£ä¸æœåŠ¡å™¨é€šä¿¡å’Œæœ¬åœ°å‡çº§æ“ä½œ
- **å‰ç«¯ç•Œé¢**: åŸºäº Vue.js çš„ç®¡ç†ç•Œé¢ï¼ˆå¼€å‘ä¸­ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0

### å®‰è£…å’Œè¿è¡Œ

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/zenvor/remote-upgrader
   cd remote-upgrader
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # å®‰è£…æœåŠ¡ç«¯ä¾èµ–
   cd server-koa
   npm install

   # å®‰è£…è®¾å¤‡ç«¯ä¾èµ–
   cd ../agent-device
   npm install
   ```

3. **é…ç½®ç¯å¢ƒ**
   ```bash
   # æœåŠ¡ç«¯é…ç½®
   cd server-koa
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æœåŠ¡å™¨å‚æ•°

   # è®¾å¤‡ç«¯é…ç½®
   cd ../agent-device
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶é…ç½®è®¾å¤‡å‚æ•°
   ```

4. **å¯åŠ¨æœåŠ¡**
   ```bash
   # å¯åŠ¨æœåŠ¡ç«¯
   cd server-koa
   npm run dev

   # å¯åŠ¨è®¾å¤‡ç«¯ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰
   cd agent-device
   npm start
   ```

## ğŸ“ é¡¹ç›®ç»“æ„

```
remote-upgrader/
â”œâ”€â”€ server-koa/                 # å‡çº§æœåŠ¡å™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/           # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ uploads/              # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ agent-device/              # è®¾å¤‡ä»£ç†
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ services/         # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ AUDIT_REPORT.md           # ä»£ç å®¡è®¡æŠ¥å‘Š
â””â”€â”€ README.md
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### æœåŠ¡ç«¯åŠŸèƒ½
- âœ… æ–‡ä»¶ä¸Šä¼ å’Œ MD5 æ ¡éªŒ
- âœ… è®¾å¤‡è¿æ¥ç®¡ç†å’Œå¿ƒè·³æ£€æµ‹
- âœ… Socket.IO å®æ—¶é€šä¿¡
- âœ… RESTful API æ¥å£
- âœ… è®¾å¤‡çŠ¶æ€ç›‘æ§
- âœ… å‡çº§å†å²è®°å½•

### è®¾å¤‡ç«¯åŠŸèƒ½
- âœ… è‡ªåŠ¨è¿æ¥å’Œé‡è¿æœºåˆ¶
- âœ… æ–‡ä»¶ä¸‹è½½å’Œæ ¡éªŒ
- âœ… å‡çº§åŒ…éƒ¨ç½²
- âœ… ç³»ç»Ÿä¿¡æ¯ä¸ŠæŠ¥
- âœ… è·¯å¾„å®‰å…¨éªŒè¯

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- CORS è·¨åŸŸå®‰å…¨é…ç½®
- æ–‡ä»¶è·¯å¾„æ³¨å…¥é˜²æŠ¤
- MD5 æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ
- Socket.IO è¿æ¥è®¤è¯
- ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

- è®¾å¤‡åœ¨çº¿çŠ¶æ€ç›‘æ§
- å‡çº§æ“ä½œå®¡è®¡æ—¥å¿—
- ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡æ”¶é›†
- é”™è¯¯æ—¥å¿—è®°å½•å’Œåˆ†æ

## ğŸ”„ éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æœåŠ¡ç«¯éƒ¨ç½²**
   ```bash
   cd server-koa
   npm run build    # å¦‚æœæœ‰æ„å»ºæ­¥éª¤
   npm start        # ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
   ```

2. **è®¾å¤‡ç«¯éƒ¨ç½²**
   ```bash
   cd agent-device
   npm install --production
   npm start
   ```

### Docker éƒ¨ç½² (å¯é€‰)
TODO: æ·»åŠ  Dockerfile å’Œ docker-compose.yml

## ğŸ¤ å¼€å‘æŒ‡å—

### ä»£ç é£æ ¼
- ä½¿ç”¨ ESM æ¨¡å—æ ¼å¼
- éµå¾ªä¸­æ–‡æ³¨é‡Šè§„èŒƒ
- é‡‡ç”¨ camelCase å‘½åçº¦å®š
- ä¿æŒä»£ç ç®€æ´å’Œå¯è¯»æ€§

### æäº¤è§„èŒƒ
- ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤æ¶ˆæ¯
- åŠŸèƒ½å¼€å‘ä½¿ç”¨ feature åˆ†æ”¯
- ä»£ç å®¡æŸ¥ååˆå¹¶åˆ° main åˆ†æ”¯

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (Current)
- åŸºç¡€è¿œç¨‹å‡çº§åŠŸèƒ½å®ç°
- Socket.IO å®æ—¶é€šä¿¡
- æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
- è®¾å¤‡çŠ¶æ€ç®¡ç†
- å®‰å…¨æ€§æ”¹è¿›å’Œä»£ç é‡æ„

## ğŸ› é—®é¢˜åé¦ˆ

è¯·åœ¨ [Issues](https://github.com/zenvor/remote-upgrader/issues) é¡µé¢æäº¤é—®é¢˜å’Œå»ºè®®ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ‘¥ è´¡çŒ®è€…

- [@zenvor](https://github.com/zenvor) - é¡¹ç›®ç»´æŠ¤è€…